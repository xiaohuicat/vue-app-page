var E=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var k=(i,t)=>{for(var e in t)E(i,e,{get:t[e],enumerable:!0})},D=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of _(t))!I.call(i,n)&&n!==e&&E(i,n,{get:()=>t[n],enumerable:!(s=F(t,n))||s.enumerable});return i},d=(i,t,e)=>(D(i,t,"default"),e&&D(e,t,"default"));var m=class{constructor(t={}){this.callbackDict={},!t&&typeof t=="object"&&Object.keys(t).forEach(e=>this.set(e,t[e]))}set(t,e){t==="string"&&typeof e=="function"&&(this.callbackDict[t]=[e]),t==="string"&&Array.isArray(e)&&e.every(s=>typeof s=="function")&&(this.callbackDict[t]=e)}add(t,e){if(typeof t=="string"&&typeof e=="function"){t in this.callbackDict?this.callbackDict[t].push(e):this.callbackDict[t]=[e];return}t==="object"&&Object.keys(t).forEach(s=>{this.add(s,t[s])})}get(t){let e=this.callbackDict[t];return e?Array.isArray(e)?e:[e]:[]}run(t,...e){return this.get(t).map(s=>s(...e))}remove(t){typeof t=="string"&&t in this.callbackDict&&delete this.callbackDict[t]}destroy(){this.callbackDict={}}};function T(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)}function v(i,t,e){let s=t.split("."),n=i;for(let c=0;c<s.length-1;c++){let f=s[c],a=s[c+1];!isNaN(a)?Array.isArray(n[f])||(n[f]=[]):(typeof n[f]!="object"||n[f]===null)&&(n[f]={}),n=n[f]}let r=s[s.length-1];return n[r]=e,i}var o={};k(o,{compile:()=>J});d(o,nt);import{initCustomFormatter as st}from"@vue/runtime-dom";import*as nt from"@vue/runtime-dom";var J=()=>{};function M(i){return typeof i=="string"&&i.trim()!==""}var g=class{constructor(t){this.name=t||"LocalStore"}get(t,e){let s={};try{s=JSON.parse(localStorage.getItem(this.name))||{}}catch{}return M(t)?typeof s=="object"&&s!==null&&t in s?s[t]:e:s}set(t,e){if(M(t)){let s=this.get();s[t]=e,localStorage[this.name]=JSON.stringify(s)}else t&&typeof t=="object"&&Object.keys(t).forEach(s=>this.set(s,t[s]))}delete(t){if(!M(t))return;let e=this.get();t in e&&delete e[t],localStorage[this.name]=JSON.stringify(e)}clear(){delete localStorage.removeItem(this.name)}size(){let t=localStorage.getItem(this.name)||"";return new TextEncoder().encode(t).length}};var $=class{constructor(){this.tasks=[],this.statusMap=new Map}add(t,e,s){let n=`task_${this.tasks.length}`;this.tasks.push({name:n,range:t,success:e,fail:s})}addList(t){t.forEach(e=>{this.add(e.range,e.success,e.fail)})}run(t){this.tasks.forEach(e=>{let{name:s,range:n,success:r,fail:c}=e;t>=n[0]&&t<n[1]?(this.statusMap.has(s)||this.statusMap.set(s,!1),this.statusMap.get(s)!==!0&&(r&&r(t),this.statusMap.set(s,!0))):(this.statusMap.has(s)||this.statusMap.set(s,!0),this.statusMap.get(s)!==!1&&(c&&c(t),this.statusMap.set(s,!1)))})}destroy(){this.tasks=[],this.statusMap.clear()}};var O={onMounted:o.onMounted,onBeforeMount:o.onBeforeMount,onBeforeUpdate:o.onBeforeUpdate,onUpdated:o.onUpdated,onUnmounted:o.onUnmounted,onBeforeUnmount:o.onBeforeUnmount,onLoad:o.onBeforeMount,onReady:o.onMounted,onDestroy:o.onUnmounted};function U(i,t){if(typeof i=="function")try{i.call(t)}catch(e){console.log(e)}}function L(i){return typeof i=="function"?(0,o.computed)(i):(0,o.ref)(i)}function A(i,t){for(let e in t)i[e]=L(t[e]);return i}function P(i,t){for(let e in t)i[e]=typeof t[e]=="function"?t[e]:()=>t[e];return i}var R=class{constructor(t){this.instance=(0,o.getCurrentInstance)();let{props:e,emit:s,proxy:n}=this.instance;this.props=e,this.emit=s,this.$=new Proxy({...n},{get:(r,c)=>typeof c=="string"&&c.indexOf("[getRef]")>-1?(c=c.replace("[getRef]",""),r[c]):(0,o.isRef)(r[c])?r[c].value:r[c],set:(r,c,f)=>typeof c=="string"&&c.indexOf("[setRef]")>-1?(c=c.replace("[setRef]",""),r[c]=(0,o.isRef)(f)?f:L(f),!0):(c in r&&(0,o.isRef)(r[c])?r[c].value=f:r[c]=f,!0)}),this.callback=new m,this.rangeTask=new $,this.local=new g(t||"app-page-store"),(0,o.onUnmounted)(()=>this?.destroy())}setRefs(t){this.instance.proxy=A(this.$,t)}setRef(t,e){let[s,...n]=t.split("."),r={};this.$&&s in this.$?(r=this.$[s],this.$["[setRef]"+s]=n.length>0?v(r,n.join("."),e):e):this.instance.proxy=A(this.$,{[t]:e})}getRef(t){return this.$["[getRef]"+t]}set(t,e){let[s,...n]=t.split("."),r={};this.$&&s in this.$?(r=this.$[s],this.$[s]=n.length>0?v(r,n.join("."),e):e):this.instance.proxy=A(this.$,{[t]:e})}get(t){return this.$[t]}setFuns(t){this.instance.proxy=P(this.$,t)}setFun(t,e){this.instance.proxy=P(this.$,{[t]:e})}getFun(t){return this.$[t]}watch(t,e){(0,o.watch)(t,(s,n)=>{typeof e=="function"?e(s,n):this.callback.run(e,s,n)})}watchRef(t,e){let[s,...n]=t.split(".");if(!(this.$&&s in this.$)){console.log(`refs\u4E2D\u6CA1\u6709\u8BE5${s}\uFF0C\u68C0\u67E5\u662F\u5426\u521D\u59CB\u5316\uFF01`);return}(0,o.watch)(()=>{let r=this.$[s];if(n.length)for(let c=0;c<n.length;c++)r=r[n[c]];return r},(r,c)=>{typeof e=="function"?e(r,c):this.callback.run(e,r,c)})}watchProps(t,e){if(!(this.props&&t in this.props)){console.log(`props\u4E2D\u6CA1\u6709\u8BE5${t}\uFF0C\u68C0\u67E5\u662F\u5426\u521D\u59CB\u5316\uFF01`);return}(0,o.watch)(this.props[t].value?this.props[t]:()=>this.props[t],(s,n)=>{typeof e=="function"?e(s,n):this.callback.run(e,s,n)})}setLives(t){if(T(t))for(let e in t)if(e in O){let s=t[e];if(typeof s!="function"){console.log(`${e}'s value need to be a function`);return}O[e](()=>U(s,this))}else console.log(`${e} is not a life function`)}setLive(t,e){if(typeof t=="string"&&typeof e=="function")if(t in O){if(typeof e!="function"){console.log("func need to be a function");return}O[t](()=>U(e,this))}else console.log(`${t} is not a life function`)}destroy(){this.instance=null,this.props=null,this.emit=null,this.proxy=null,this.$=null,this.local.free(),this.local=null,this.rangeTask.destroy(),this.rangeTask=null,this.callback.run("destroy"),this.callback.destroy(),this.callback=null}binds(t){for(let e in t){let s=t[e];typeof s=="function"?this[e]=(...n)=>s.call(this,...n):this[e]=s}}bind(t,e){typeof t=="string"&&(typeof e=="function"?this[t]=(...s)=>e.call(this,...s):this[t]=e)}};function K(i){i==""||i=="#"||i==null||(i.indexOf("[hard]")>-1?(i=i.replace("[hard]",""),document.location.href=i):this?.router?this.router.push({path:i}):document.location.href=i)}async function q(i){try{await navigator.clipboard.writeText(i),this?.msg&&this.msg.showMsg("\u590D\u5236\u6210\u529F","success")}catch{let e=await navigator.permissions.query({name:"write-on-clipboard"});e.state=="granted"||e.state=="prompt"?this?.msg&&this.msg.showMsg("\u6CA1\u6709\u6743\u9650","fail"):this?.msg&&this.msg.showMsg("\u590D\u5236\u5931\u8D25","fail")}}function z(i,t,e){var s=new Blob([i],{type:e});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(s,t);else{var n=document.createElement("a"),r=URL.createObjectURL(s);n.href=r,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(r)},0)}}function G(i,t){var e=document.createElement("a");e.href=i,e.download=t,document.body.appendChild(e),e.click(),setTimeout(function(){document.body.removeChild(e),window.URL.revokeObjectURL(i)},0)}var H={downloadFileByData:z,downloadFileByUrl:G,copyText:q,goToUrl:K};function Q(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)}function W(i,t){let e=i.indexOf(t);if(e!==-1){let s=i.substring(0,e),n=i.substring(e+t.length);return{left:s,right:n}}else return{left:i,right:""}}function X({componentMap:i,template:t,props:e,events:s,mainClass:n="dyComponent"}){let r=0,c=t.split(`
`),f=[];return c.forEach(a=>{if(!a||a.trim()==="")return;let l=a.match(/\{\{(.*?)\}\}/g);if(!l){f.push((0,o.h)("div",{class:n},a.trim()));return}let h=[],u=a;for(let y=0;y<l?.length;y++){let B=l[y].slice(2,-2),[S,j]=Y(B),b={},N={},p=i?.[S],{left:x,right:C}=W(u,l[y]);if(!p){h.push((0,o.h)("span",{},x+S)),u=C;continue}if(j||(typeof e=="function"?b=e(r):Array.isArray(e)&&e.length>r?b=e[r]:Q(e)&&(b=e),r++),s)for(let w of Object.keys(s))typeof s[w]=="function"&&(N[`on${w.slice(0,1).toUpperCase()+w.slice(1)}`]=s[w]);x&&x.trim()&&h.push((0,o.h)("span",{},x)),typeof p=="function"&&(p=p(e)),h.push((0,o.h)(p,{...b,...N,...j})),u=C}u&&h.push((0,o.h)("span",{},u)),f.push((0,o.h)("div",{class:n},h))}),(0,o.defineComponent)({render:()=>f})}function Y(i){let t,e=null,s=i.match(/\([^)]*\)/g);if(!s)return t=i,[t,e];t=i.split(s[0])[0];let n=s[0].slice(1,-1);if(e={},n.length>0)try{e=JSON.parse(n)}catch{e.text=n}return[t,e]}var $t=R;export{m as Callback,g as LocalStore,R as Page,H as Tools,$t as default,X as templateToComponment};
/*! Bundled license information:

vue/dist/vue.runtime.esm-bundler.js:
  (**
  * vue v3.4.38
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
*/
