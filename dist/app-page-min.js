var S=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var q=Object.prototype.hasOwnProperty;var G=(o,t)=>{for(var e in t)S(o,e,{get:t[e],enumerable:!0})},E=(o,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of z(t))!q.call(o,n)&&n!==e&&S(o,n,{get:()=>t[n],enumerable:!(s=J(t,n))||s.enumerable});return o},d=(o,t,e)=>(E(o,t,"default"),e&&E(e,t,"default"));var m=class{constructor(t={}){this.callbackDict=t}add_hard(t,e){this.callbackDict[t]=e}add(t,e){if(t==="string"&&typeof e=="function")if(t in this.callbackDict){let s=Array.isArray(this.callbackDict[t])?this.callbackDict[t]:[this.callbackDict[t]];s.push(e),this.callbackDict[t]=s}else this.callbackDict[t]=e;t==="object"&&Object.keys(t).forEach(s=>{this.add(s,t[s])})}get(t){let e=this.callbackDict[t];return e?Array.isArray(e)?e:[e]:[]}getDict(){return this.callbackDict}run(t,...e){return this.get(t).map(s=>s(...e))}remove(t){t?delete this.callbackDict[t]:this.callbackDict={}}destroy(){this.callbackDict={}}};function T(o){return o!==null&&typeof o=="object"&&!Array.isArray(o)}function A(o,t,e){let s=t.split("."),n=o;for(let r=0;r<s.length;r++){if(!n[s[r]])return e;n=n[s[r]]}return n}function g(o,t,e){let s=t.split("."),n=o;for(let r=0;r<s.length-1;r++)n[s[r]]||(n[s[r]]={}),n=n[s[r]];return n[s[s.length-1]]=e,o}function L(o,t,e){let s=t.split("."),n=o;for(let r of s){if(!n[r])break;n=n[s[i]]}return n[s[s.length-1]]=e,o}function P(o,t,e){var s=new Blob([o],{type:e});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(s,t);else{var n=document.createElement("a"),r=URL.createObjectURL(s);n.href=r,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(r)},0)}}function F(o,t){var e=document.createElement("a");e.href=o,e.download=t,document.body.appendChild(e),e.click(),setTimeout(function(){document.body.removeChild(e),window.URL.revokeObjectURL(o)},0)}var c={};G(c,{compile:()=>H});d(c,rt);import{initCustomFormatter as ot}from"@vue/runtime-dom";import*as rt from"@vue/runtime-dom";var H=()=>{};var y=class{constructor(t){this.name=t||"LocalStore",this.data=null}get(t,e){let s;try{s=JSON.parse(localStorage.getItem(this.name))}catch{s={}}return s||(s={}),this.data,!t&&typeof t!="string"?s:A(s,t,e)}set(t,e){if(t){if(typeof t=="string")this.data=g(this.data,t,e);else if(typeof t=="object")for(let s of Object.keys(t))this.data||(this.data={}),this.data[s]=t[s]}}update(t,e){if(t){if(typeof t=="string")this.data=L(this.data,t,e);else if(typeof t=="object")for(let s of Object.keys(t))s in this.data&&(this.data||(this.data={}),this.data[s]=t[s])}}delete(t){t&&t in this.data&&delete this.get(t)}save(t,e){this.set(t,e),localStorage[this.name]=JSON.stringify(this.data)}free(){this.data=null}clear(){delete localStorage[this.name]}size(){let t=localStorage.getItem(this.name)||"";return new Blob([t]).size}};var D=class{constructor(){this.tasks=[],this.statusMap=new Map}add(t,e,s){let n=`task_${this.tasks.length}`;this.tasks.push({name:n,range:t,success:e,fail:s})}addList(t){t.forEach(e=>{this.add(e.range,e.success,e.fail)})}run(t){this.tasks.forEach(e=>{let{name:s,range:n,success:r,fail:a}=e;t>=n[0]&&t<n[1]?(this.statusMap.has(s)||this.statusMap.set(s,!1),this.statusMap.get(s)!==!0&&(r&&r(t),this.statusMap.set(s,!0))):(this.statusMap.has(s)||this.statusMap.set(s,!0),this.statusMap.get(s)!==!1&&(a&&a(t),this.statusMap.set(s,!1)))})}destroy(){this.tasks=[],this.statusMap.clear()}};var R={onMounted:c.onMounted,onBeforeMount:c.onBeforeMount,onBeforeUpdate:c.onBeforeUpdate,onUpdated:c.onUpdated,onUnmounted:c.onUnmounted,onBeforeUnmount:c.onBeforeUnmount,onLoad:c.onBeforeMount,onReady:c.onMounted,onDestroy:c.onUnmounted};function N(o,t){if(typeof o=="function")try{o.call(t)}catch(e){console.log(e)}}function _(o){return typeof o=="function"?(0,c.computed)(o):(0,c.ref)(o)}function M(o,t){for(let e in t)o[e]=_(t[e]);return o}function k(o,t){for(let e in t)o[e]=typeof t[e]=="function"?t[e]:()=>t[e];return o}var v=class{constructor(t){this.instance=(0,c.getCurrentInstance)();let{props:e,emit:s,proxy:n}=this.instance;this.props=e,this.emit=s,this.$=new Proxy({...n},{get:(r,a)=>typeof a=="string"&&a.indexOf("[getRef]")>-1?(a=a.replace("[getRef]",""),r[a]):(0,c.isRef)(r[a])?r[a].value:r[a],set:(r,a,f)=>typeof a=="string"&&a.indexOf("[setRef]")>-1?(a=a.replace("[setRef]",""),r[a]=(0,c.isRef)(f)?f:_(f),!0):(a in r&&(0,c.isRef)(r[a])?r[a].value=f:r[a]=f,!0)}),this.callback=new m,this.rangeTask=new D,this.local=new y(t||"app-page-store"),(0,c.onUnmounted)(()=>this?.destroy())}setRefs(t){this.instance.proxy=M(this.$,t)}setRef(t,e){let[s,...n]=t.split("."),r={};this.$&&s in this.$?(r=this.$[s],this.$["[setRef]"+s]=n.length>0?g(r,n.join("."),e):e):this.instance.proxy=M(this.$,{[t]:e})}getRef(t){return this.$["[getRef]"+t]}set(t,e){let[s,...n]=t.split("."),r={};this.$&&s in this.$?(r=this.$[s],this.$[s]=n.length>0?g(r,n.join("."),e):e):this.instance.proxy=M(this.$,{[t]:e})}get(t){return this.$[t]}setFuns(t){this.instance.proxy=k(this.$,t)}setFun(t,e){this.instance.proxy=k(this.$,{[t]:e})}getFun(t){return this.$[t]}watch(t,e){(0,c.watch)(t,(s,n)=>{typeof e=="function"?e(s,n):this.callback.run(e,s,n)})}watchRef(t,e){let[s,...n]=t.split(".");if(!(this.$&&s in this.$)){console.log(`refs\u4E2D\u6CA1\u6709\u8BE5${s}\uFF0C\u68C0\u67E5\u662F\u5426\u521D\u59CB\u5316\uFF01`);return}(0,c.watch)(()=>{let r=this.$[s];if(n.length)for(let a=0;a<n.length;a++)r=r[n[a]];return r},(r,a)=>{typeof e=="function"?e(r,a):this.callback.run(e,r,a)})}watchProps(t,e){if(!(this.props&&t in this.props)){console.log(`props\u4E2D\u6CA1\u6709\u8BE5${t}\uFF0C\u68C0\u67E5\u662F\u5426\u521D\u59CB\u5316\uFF01`);return}(0,c.watch)(this.props[t].value?this.props[t]:()=>this.props[t],(s,n)=>{typeof e=="function"?e(s,n):this.callback.run(e,s,n)})}setLives(t){if(T(t))for(let e in t)if(e in R){let s=t[e];if(typeof s!="function"){console.log(`${e}'s value need to be a function`);return}R[e](()=>N(s,this))}else console.log(`${e} is not a life function`)}setLive(t,e){if(typeof t=="string"&&typeof e=="function")if(t in R){if(typeof e!="function"){console.log("func need to be a function");return}R[t](()=>N(e,this))}else console.log(`${t} is not a life function`)}destroy(){this.instance=null,this.props=null,this.emit=null,this.proxy=null,this.$=null,this.local.free(),this.local=null,this.rangeTask.destroy(),this.rangeTask=null,this.callback.run("destroy"),this.callback.destroy(),this.callback=null}binds(t){for(let e in t){let s=t[e];typeof s=="function"?this[e]=(...n)=>s.call(this,...n):this[e]=s}}bind(t,e){typeof t=="string"&&(typeof e=="function"?this[t]=(...s)=>e.call(this,...s):this[t]=e)}};function K(o){o==""||o=="#"||o==null||(o.indexOf("[hard]")>-1?(o=o.replace("[hard]",""),document.location.href=o):this?.router?this.router.push({path:o}):document.location.href=o)}async function Q(o){try{await navigator.clipboard.writeText(o),this?.msg&&this.msg.showMsg("\u590D\u5236\u6210\u529F","success")}catch{let e=await navigator.permissions.query({name:"write-on-clipboard"});e.state=="granted"||e.state=="prompt"?this?.msg&&this.msg.showMsg("\u6CA1\u6709\u6743\u9650","fail"):this?.msg&&this.msg.showMsg("\u590D\u5236\u5931\u8D25","fail")}}var W={downloadFileByData:P,downloadFileByUrl:F,copyText:Q,goToUrl:K};function X(o){return o!==null&&typeof o=="object"&&!Array.isArray(o)}function Y(o,t){let e=o.indexOf(t);if(e!==-1){let s=o.substring(0,e),n=o.substring(e+t.length);return{left:s,right:n}}else return{left:o,right:""}}function Z({componentMap:o,template:t,props:e,events:s,mainClass:n="dyComponent"}){let r=0,a=t.split(`
`),f=[];return a.forEach(l=>{if(!l||l.trim()==="")return;let b=l.match(/\{\{(.*?)\}\}/g);if(!b){f.push((0,c.h)("div",{class:n},l.trim()));return}let h=[],u=l;for(let w=0;w<b?.length;w++){let I=b[w].slice(2,-2),[j,U]=V(I),O={},C={},p=o?.[j],{left:x,right:B}=Y(u,b[w]);if(!p){h.push((0,c.h)("span",{},x+j)),u=B;continue}if(U||(typeof e=="function"?O=e(r):Array.isArray(e)&&e.length>r?O=e[r]:X(e)&&(O=e),r++),s)for(let $ of Object.keys(s))typeof s[$]=="function"&&(C[`on${$.slice(0,1).toUpperCase()+$.slice(1)}`]=s[$]);x&&x.trim()&&h.push((0,c.h)("span",{},x)),typeof p=="function"&&(p=p(e)),h.push((0,c.h)(p,{...O,...C,...U})),u=B}u&&h.push((0,c.h)("span",{},u)),f.push((0,c.h)("div",{class:n},h))}),(0,c.defineComponent)({render:()=>f})}function V(o){let t,e=null,s=o.match(/\([^)]*\)/g);if(!s)return t=o,[t,e];t=o.split(s[0])[0];let n=s[0].slice(1,-1);if(e={},n.length>0)try{e=JSON.parse(n)}catch{e.text=n}return[t,e]}var vt=v;export{m as Callback,y as LocalStore,v as Page,W as Tools,vt as default,Z as templateToComponment};
/*! Bundled license information:

vue/dist/vue.runtime.esm-bundler.js:
  (**
  * vue v3.4.38
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
*/
